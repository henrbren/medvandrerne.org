Parse.Cloud.afterSave("dogTraining", async (request) => {
  const dogTraining = request.object;
  const dogOwner = dogTraining.get("dogOwner"); // Assuming the owner is set as a pointer in DogTraining
  const owner = dogTraining.get("owner"); // Assuming the owner is set as a pointer in DogTraining


  // Check if this is the first DogTraining entry for this user
  const query = new Parse.Query("dogTraining");
  query.equalTo("dogOwner", dogOwner);
  const count = await query.count({ useMasterKey: true });

  if (count === 1) {  // Only proceed if this is the first entry
    try {
      // Create a new DogReward object
      const DogReward = Parse.Object.extend("dogRewards");
      const dogReward = new DogReward();

      // Set fields for DogReward
      dogReward.set("title", "Første trening");
      dogReward.set("badge", 'medal');
      dogReward.set("desc", 'Første trening utført! Gratulerer.');
      dogReward.set("dogOwner", dogOwner); // Set the owner pointer
      dogReward.set("owner", owner); // Set the owner pointer
      
      // Save the DogReward
      await dogReward.save(null, { useMasterKey: true });

      console.log("Dog reward created successfully for first-time training.");
    } catch (error) {
      console.error("Failed to create Dog reward for first-time training: ", error);
    }
  }
});